// Factory "morphs" into a Pudding class.
// The reasoning is that calling load in each context
// is cumbersome.

(function() {

  var contract_data = {
    abi: [{"constant":false,"inputs":[{"name":"channelId","type":"bytes32"},{"name":"sequenceNumber","type":"uint256"},{"name":"state","type":"bytes"},{"name":"signature0","type":"bytes"},{"name":"signature1","type":"bytes"}],"name":"updateState","outputs":[],"type":"function"},{"constant":false,"inputs":[{"name":"channelId","type":"bytes32"},{"name":"signature","type":"bytes"},{"name":"participant","type":"uint8"}],"name":"startChallengePeriod","outputs":[],"type":"function"},{"constant":false,"inputs":[{"name":"hash","type":"bytes32"},{"name":"sig","type":"bytes"},{"name":"signer","type":"address"}],"name":"ecverify","outputs":[{"name":"b","type":"bool"}],"type":"function"},{"constant":false,"inputs":[{"name":"channelId","type":"bytes32"},{"name":"addr0","type":"address"},{"name":"addr1","type":"address"},{"name":"state","type":"bytes"},{"name":"challengePeriod","type":"uint256"},{"name":"signature0","type":"bytes"},{"name":"signature1","type":"bytes"}],"name":"newChannel","outputs":[],"type":"function"},{"constant":false,"inputs":[{"name":"hash","type":"bytes32"},{"name":"sig","type":"bytes"}],"name":"ecrecovery","outputs":[{"name":"","type":"address"}],"type":"function"},{"constant":false,"inputs":[{"name":"channelId","type":"bytes32"}],"name":"tryClose","outputs":[],"type":"function"},{"constant":false,"inputs":[{"name":"channelId","type":"bytes32"}],"name":"getChannel","outputs":[{"name":"addr0","type":"address"},{"name":"addr1","type":"address"},{"name":"phase","type":"uint8"},{"name":"challengePeriod","type":"uint256"},{"name":"closingBlock","type":"uint256"},{"name":"state","type":"bytes"},{"name":"sequenceNumber","type":"uint256"}],"type":"function"},{"anonymous":false,"inputs":[{"indexed":false,"name":"message","type":"string"}],"name":"Error","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"label","type":"string"},{"indexed":false,"name":"message","type":"string"}],"name":"LogString","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"label","type":"string"},{"indexed":false,"name":"message","type":"bytes"}],"name":"LogBytes","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"label","type":"string"},{"indexed":false,"name":"message","type":"bytes32"}],"name":"LogBytes32","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"num","type":"uint256"}],"name":"LogNum256","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"num","type":"uint8"}],"name":"LogNum","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"b","type":"bool"}],"name":"LogBool","type":"event"}],
    binary: "6060604052610f73806100126000396000f3606060405236156100615760e060020a60003504632af3b7f881146100635780632ba287261461013a57806339cdde32146101fa5780636d46398b1461025c57806377d32e941461040057806380ef353d14610467578063831c2b82146104f3575b005b604080516020604435600481810135601f8101849004840285018401909552848452610061948135946024803595939460649492939101918190840183828082843750506040805160209735808a0135601f81018a90048a0283018a019093528282529698976084979196506024919091019450909250829150840183828082843750506040805160209735808a0135601f81018a90048a0283018a0190935282825296989760a49791965060249190910194509092508291508401838280828437509496505050505050506000610ac78661046e565b60408051602060248035600481810135601f81018590048502860185019096528585526100619581359591946044949293909201918190840183828082843750949650509335935050505060008381526020819052604081206002015460a060020a900460ff168114610e05576040805160208082526010908201527f6368616e6e656c206e6f74206f70656e00000000000000000000000000000000818301529051600080516020610f538339815191529181900360600190a1610dff565b60408051602060248035600481810135601f81018590048502860185019096528585526105a5958135959194604494929390920191819084018382808284375094965050933593505050505b600081600160a060020a03166106f2858561044a565b604080516020606435600481810135601f8101849004840285018401909552848452610061948135946024803595604435956084949201919081908401838280828437505060408051602060a435808b0135601f810183900483028401830190945283835297999835989760c4975091955060249190910193509091508190840183828082843750506040805160209735808a0135601f81018a90048a0283018a0190935282825296989760e4979196506024919091019450909250829150840183828082843750949650505050505050604080516101008101825260008082526020828101829052828401829052606083018290526080830182905260a083018290528351808201855282815260c084015260e083018290528a8252819052918220548914156107ad57604080516020808252602a908201527f6368616e6e656c20776974682074686174206368616e6e656c496420616c7265818301527f616479206578697374730000000000000000000000000000000000000000000060608201529051600080516020610f538339815191529181900360800190a16107a2565b60408051602060248035600481810135601f81018590048502860185019096528585526105b795813595919460449492939092019181908401838280828437509496505050505050505b600060006000600084516041141515610681575b50505092915050565b6100616004355b60008181526020819052604090206002015460a060020a900460ff1660011480156104a6575060406000908120908290526004015443115b156104f0576000818152602081905260409020600201805474ff00000000000000000000000000000000000000001916740200000000000000000000000000000000000000001790555b50565b6040805160208181018352600080835260048035808352828452858320600180820154600280840154600385015496850154600590950180548c516101009682161596909602600019011692909204601f81018a90048a0285018a01909b528a84526105d49a9599600160a060020a03938416999382169860a060020a90920460ff169796909491939192918301828280156107695780601f1061073e57610100808354040283529160200191610769565b60408051918252519081900360200190f35b60408051600160a060020a03929092168252519081900360200190f35b6040518088600160a060020a0316815260200187600160a060020a031681526020018660ff168152602001858152602001848152602001806020018381526020018281038252848181518152602001915080519060200190808383829060006004602084601f0104600f02600301f150905090810190601f16801561066d5780820380516001836020036101000a031916815260200191505b509850505050505050505060405180910390f35b505050602082015160408301516041840151601b60ff821610156106a357601b015b600186828585604051808581526020018460ff1681526020018381526020018281526020019450505050506020604051808303816000866161da5a03f11561000257505060405151935061045e565b600160a060020a031614905080507fc33356bc2bad2ce263b056da5d061d4e89c336823d5e77f14c1383aedb7a1b3a816040518082815260200191505060405180910390a19392505050565b820191906000526020600020905b81548152906001019060200180831161074c57829003601f168201915b50505060008b8152602081905260409020600601549294509192505050919395979092949650565b505060e09190910151600691909101555b505050505050505050565b8888888860405180807f6e65774368616e6e656c00000000000000000000000000000000000000000000815260200150600a0185815260200184600160a060020a03166c0100000000000000000000000002815260140183600160a060020a03166c010000000000000000000000000281526014018280519060200190808383829060006004602084601f0104600f02600301f1509050019450505050506040518091039020915061086082858a610246565b15156108b9576040805160208082526012908201527f7369676e61747572653020696e76616c69640000000000000000000000000000818301529051600080516020610f538339815191529181900360600190a16107a2565b6108c4828489610246565b151561091d576040805160208082526012908201527f7369676e61747572653120696e76616c69640000000000000000000000000000818301529051600080516020610f538339815191529181900360600190a16107a2565b610100604051908101604052808a815260200189815260200188815260200160008152602001868152602001600081526020018781526020016000815260200150905080600060005060008b81526020019081526020016000206000506000820151816000016000505560208201518160010160006101000a815481600160a060020a030219169083021790555060408201518160020160006101000a815481600160a060020a030219169083021790555060608201518160020160146101000a81548160ff021916908302179055506080820151816003016000505560a0820151816004016000505560c0820151816005016000509080519060200190828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10610a7457805160ff19168380011785555b506107919291505b80821115610aa45760008155600101610a60565b82800160010185558215610a58579182015b82811115610a58578251826000505591602001919060010190610a86565b5090565b505060008681526020819052604090206006018590555b505050505050565b600086815260208190526040902060029081015460a060020a900460ff161415610b3e57604080516020808252600e908201527f6368616e6e656c20636c6f736564000000000000000000000000000000000000818301529051600080516020610f538339815191529181900360600190a1610abf565b85858560405180807f7570646174655374617465000000000000000000000000000000000000000000815260200150600b018481526020018381526020018280519060200190808383829060006004602084601f0104600f02600301f150905001935050505060405180910390209050610be88184600060005060008a815260200190815260200160002060005060010160009054906101000a9004600160a060020a0316610246565b1515610c41576040805160208082526012908201527f7369676e61747572653020696e76616c69640000000000000000000000000000818301529051600080516020610f538339815191529181900360600190a1610abf565b600086815260208190526040902060020154610c699082908490600160a060020a0316610246565b1515610cc2576040805160208082526012908201527f7369676e61747572653120696e76616c69640000000000000000000000000000818301529051600080516020610f538339815191529181900360600190a1610abf565b6000868152602081905260409020600601548511610d2d576040805160208082526017908201527f73657175656e6365206e756d62657220746f6f206c6f77000000000000000000818301529051600080516020610f538339815191529181900360600190a1610abf565b60008681526020818152604082208651600591909101805481855293839020909360026001821615610100026000190190911604601f908101849004820193890190839010610d8f57805160ff19168380011785555b50610aa8929150610a60565b82800160010185558215610d83579182015b82811115610d83578251826000505591602001919060010190610da1565b6000848152602081905260409020600381015443016004820155600201805474ff0000000000000000000000000000000000000000191660a060020a1790555b50505050565b50604080517f73746172744368616c6c656e6765506572696f64000000000000000000000000815260148101859052905190819003603401902060ff821660001415610e7357600084815260208190526040902060010154610ea79082908590600160a060020a0316610246565b8160ff1660011415610f0057600084815260208190526040902060020154610ea79082908590600160a060020a0316610246565b1515610dbf576040805160208082526011908201527f7369676e617475726520696e76616c6964000000000000000000000000000000818301529051600080516020610f538339815191529181900360600190a1610dff565b6040805160208082526013908201527f7061727469636970616e7420696e76616c696400000000000000000000000000818301529051600080516020610f538339815191529181900360600190a1610dff5608c379a0afcc32b1a39302f7cb8073359698411ab5fd6e3edb2c02c0b5fba8aa",
    unlinked_binary: "6060604052610f73806100126000396000f3606060405236156100615760e060020a60003504632af3b7f881146100635780632ba287261461013a57806339cdde32146101fa5780636d46398b1461025c57806377d32e941461040057806380ef353d14610467578063831c2b82146104f3575b005b604080516020604435600481810135601f8101849004840285018401909552848452610061948135946024803595939460649492939101918190840183828082843750506040805160209735808a0135601f81018a90048a0283018a019093528282529698976084979196506024919091019450909250829150840183828082843750506040805160209735808a0135601f81018a90048a0283018a0190935282825296989760a49791965060249190910194509092508291508401838280828437509496505050505050506000610ac78661046e565b60408051602060248035600481810135601f81018590048502860185019096528585526100619581359591946044949293909201918190840183828082843750949650509335935050505060008381526020819052604081206002015460a060020a900460ff168114610e05576040805160208082526010908201527f6368616e6e656c206e6f74206f70656e00000000000000000000000000000000818301529051600080516020610f538339815191529181900360600190a1610dff565b60408051602060248035600481810135601f81018590048502860185019096528585526105a5958135959194604494929390920191819084018382808284375094965050933593505050505b600081600160a060020a03166106f2858561044a565b604080516020606435600481810135601f8101849004840285018401909552848452610061948135946024803595604435956084949201919081908401838280828437505060408051602060a435808b0135601f810183900483028401830190945283835297999835989760c4975091955060249190910193509091508190840183828082843750506040805160209735808a0135601f81018a90048a0283018a0190935282825296989760e4979196506024919091019450909250829150840183828082843750949650505050505050604080516101008101825260008082526020828101829052828401829052606083018290526080830182905260a083018290528351808201855282815260c084015260e083018290528a8252819052918220548914156107ad57604080516020808252602a908201527f6368616e6e656c20776974682074686174206368616e6e656c496420616c7265818301527f616479206578697374730000000000000000000000000000000000000000000060608201529051600080516020610f538339815191529181900360800190a16107a2565b60408051602060248035600481810135601f81018590048502860185019096528585526105b795813595919460449492939092019181908401838280828437509496505050505050505b600060006000600084516041141515610681575b50505092915050565b6100616004355b60008181526020819052604090206002015460a060020a900460ff1660011480156104a6575060406000908120908290526004015443115b156104f0576000818152602081905260409020600201805474ff00000000000000000000000000000000000000001916740200000000000000000000000000000000000000001790555b50565b6040805160208181018352600080835260048035808352828452858320600180820154600280840154600385015496850154600590950180548c516101009682161596909602600019011692909204601f81018a90048a0285018a01909b528a84526105d49a9599600160a060020a03938416999382169860a060020a90920460ff169796909491939192918301828280156107695780601f1061073e57610100808354040283529160200191610769565b60408051918252519081900360200190f35b60408051600160a060020a03929092168252519081900360200190f35b6040518088600160a060020a0316815260200187600160a060020a031681526020018660ff168152602001858152602001848152602001806020018381526020018281038252848181518152602001915080519060200190808383829060006004602084601f0104600f02600301f150905090810190601f16801561066d5780820380516001836020036101000a031916815260200191505b509850505050505050505060405180910390f35b505050602082015160408301516041840151601b60ff821610156106a357601b015b600186828585604051808581526020018460ff1681526020018381526020018281526020019450505050506020604051808303816000866161da5a03f11561000257505060405151935061045e565b600160a060020a031614905080507fc33356bc2bad2ce263b056da5d061d4e89c336823d5e77f14c1383aedb7a1b3a816040518082815260200191505060405180910390a19392505050565b820191906000526020600020905b81548152906001019060200180831161074c57829003601f168201915b50505060008b8152602081905260409020600601549294509192505050919395979092949650565b505060e09190910151600691909101555b505050505050505050565b8888888860405180807f6e65774368616e6e656c00000000000000000000000000000000000000000000815260200150600a0185815260200184600160a060020a03166c0100000000000000000000000002815260140183600160a060020a03166c010000000000000000000000000281526014018280519060200190808383829060006004602084601f0104600f02600301f1509050019450505050506040518091039020915061086082858a610246565b15156108b9576040805160208082526012908201527f7369676e61747572653020696e76616c69640000000000000000000000000000818301529051600080516020610f538339815191529181900360600190a16107a2565b6108c4828489610246565b151561091d576040805160208082526012908201527f7369676e61747572653120696e76616c69640000000000000000000000000000818301529051600080516020610f538339815191529181900360600190a16107a2565b610100604051908101604052808a815260200189815260200188815260200160008152602001868152602001600081526020018781526020016000815260200150905080600060005060008b81526020019081526020016000206000506000820151816000016000505560208201518160010160006101000a815481600160a060020a030219169083021790555060408201518160020160006101000a815481600160a060020a030219169083021790555060608201518160020160146101000a81548160ff021916908302179055506080820151816003016000505560a0820151816004016000505560c0820151816005016000509080519060200190828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10610a7457805160ff19168380011785555b506107919291505b80821115610aa45760008155600101610a60565b82800160010185558215610a58579182015b82811115610a58578251826000505591602001919060010190610a86565b5090565b505060008681526020819052604090206006018590555b505050505050565b600086815260208190526040902060029081015460a060020a900460ff161415610b3e57604080516020808252600e908201527f6368616e6e656c20636c6f736564000000000000000000000000000000000000818301529051600080516020610f538339815191529181900360600190a1610abf565b85858560405180807f7570646174655374617465000000000000000000000000000000000000000000815260200150600b018481526020018381526020018280519060200190808383829060006004602084601f0104600f02600301f150905001935050505060405180910390209050610be88184600060005060008a815260200190815260200160002060005060010160009054906101000a9004600160a060020a0316610246565b1515610c41576040805160208082526012908201527f7369676e61747572653020696e76616c69640000000000000000000000000000818301529051600080516020610f538339815191529181900360600190a1610abf565b600086815260208190526040902060020154610c699082908490600160a060020a0316610246565b1515610cc2576040805160208082526012908201527f7369676e61747572653120696e76616c69640000000000000000000000000000818301529051600080516020610f538339815191529181900360600190a1610abf565b6000868152602081905260409020600601548511610d2d576040805160208082526017908201527f73657175656e6365206e756d62657220746f6f206c6f77000000000000000000818301529051600080516020610f538339815191529181900360600190a1610abf565b60008681526020818152604082208651600591909101805481855293839020909360026001821615610100026000190190911604601f908101849004820193890190839010610d8f57805160ff19168380011785555b50610aa8929150610a60565b82800160010185558215610d83579182015b82811115610d83578251826000505591602001919060010190610da1565b6000848152602081905260409020600381015443016004820155600201805474ff0000000000000000000000000000000000000000191660a060020a1790555b50505050565b50604080517f73746172744368616c6c656e6765506572696f64000000000000000000000000815260148101859052905190819003603401902060ff821660001415610e7357600084815260208190526040902060010154610ea79082908590600160a060020a0316610246565b8160ff1660011415610f0057600084815260208190526040902060020154610ea79082908590600160a060020a0316610246565b1515610dbf576040805160208082526011908201527f7369676e617475726520696e76616c6964000000000000000000000000000000818301529051600080516020610f538339815191529181900360600190a1610dff565b6040805160208082526013908201527f7061727469636970616e7420696e76616c696400000000000000000000000000818301529051600080516020610f538339815191529181900360600190a1610dff5608c379a0afcc32b1a39302f7cb8073359698411ab5fd6e3edb2c02c0b5fba8aa",
    address: "0x59ffb04e4b6ae2612cde27178deaa622fd8388a9",
    generated_with: "2.0.6",
    contract_name: "StateChannels"
  };

  function Contract() {
    if (Contract.Pudding == null) {
      throw new Error("StateChannels error: Please call load() first before creating new instance of this contract.");
    }

    Contract.Pudding.apply(this, arguments);
  };

  Contract.load = function(Pudding) {
    Contract.Pudding = Pudding;

    Pudding.whisk(contract_data, Contract);

    // Return itself for backwards compatibility.
    return Contract;
  }

  Contract.new = function() {
    if (Contract.Pudding == null) {
      throw new Error("StateChannels error: Please call load() first before calling new().");
    }

    return Contract.Pudding.new.apply(Contract, arguments);
  };

  Contract.at = function() {
    if (Contract.Pudding == null) {
      throw new Error("StateChannels error: lease call load() first before calling at().");
    }

    return Contract.Pudding.at.apply(Contract, arguments);
  };

  Contract.deployed = function() {
    if (Contract.Pudding == null) {
      throw new Error("StateChannels error: Please call load() first before calling deployed().");
    }

    return Contract.Pudding.deployed.apply(Contract, arguments);
  };

  if (typeof module != "undefined" && typeof module.exports != "undefined") {
    module.exports = Contract;
  } else {
    // There will only be one version of Pudding in the browser,
    // and we can use that.
    window.StateChannels = Contract;
  }

})();
